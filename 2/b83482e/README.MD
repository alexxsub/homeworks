Комментарии по задачам из архива:
2. Я в целом уже писал в чате, что изначальный shell скрипт у меня неправильно считал загрузку cpu, и я его там прям в эфире и переделал, так что теперь данные более адекватные.
Что было: считывание /proc/stat один раз
Что стало: считывание /proc/stat два раза с интервалом в секунду и расчет разницы значений.
 
3. В Grafana 8 изменилась настройка триггеров, и пришлось сделать два: 1) из Alerting. Работал, но не показывал на графике начало и окончание тревоги. Только красное/зеленое сердечко в имени панели 2) из редактирования панели. Этот четко отрабатывает статусы Pending / Alerting / Normal.
Нагрузка легко создается программой stress. Параметры запуска в архиве. Я выделил VM 2 vCPU, поэтому и запускаю с --cpu=2, чтобы нагрузить более 70%.
 
4. Очень долго промучился с функцией map: никак не мог понять, какой атрибут к r подставлять. Помог редактор в самом инфлюксе.
Судя по графику, встроенный плагин меньше нагружает cpu, чем скрипты. Скрипты работают примерно одинаково и выдают почти одинаковую "пилу" (psutil чуть меньше). Так что при прочих равных стоит поискать готовый плагин, нежели писать свой скрипт.
 
5. BotFather, показанный вами на вебинаре, позволяет всё сделать легко и просто. Для Grafana нужен еще myidbot, описание нашел в документации к инфлюксу.
 
Спасибо.
